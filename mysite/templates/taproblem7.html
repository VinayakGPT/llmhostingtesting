{% extends "base2.html" %}
{% block title %}Problem 7{% endblock %}
 
{% block content %}
<form id="taproblem7-form" method="post" novalidate>
    {% csrf_token %}
    <div class="container">
        <br> 
        <h2>7. Recursive Pattern</h2>
        <div class="problem-statement">
            <pre class="wrap"><h5><b>Problem Statement:</b></h5>Given a positive number n, you need to give as an output the following pattern. You need to use recursion. No marks if loops are used.
Example 1:
Input: 11
Output: 11 6 1 -4 1 6 11
Example 2:
Input: 15
Output: 15 10 5 0 5 10 15</pre>
        </div>

        <p><pre class="wraptext"><h5><b>Incorrect Solution:</b></h5><code><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">int</span> <span class="function">viper</span>(<span class="keyword">int</span> b) {
    <span class="function">printf</span>(<span class="string">"%d "</span>, b);
    <span class="keyword">if</span> (b &gt; 0) {
        <span class="function">viper</span>(b - 5);
    }
    <span class="function">printf</span>(<span class="string">"%d "</span>, b);
    <span class="keyword">return</span> 0;
}
<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> n = 11;
    <span class="function">viper</span>(n);
    <span class="keyword">return</span> 0;
}</code></pre></p>


        <ul class="nav nav-tabs" id="feedbackTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="feedback1-tab" data-toggle="tab" href="#feedback1" role="tab" aria-controls="feedback1" aria-selected="true">Feedback 1</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback2-tab" data-toggle="tab" href="#feedback2" role="tab" aria-controls="feedback2" aria-selected="false">Feedback 2</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback3-tab" data-toggle="tab" href="#feedback3" role="tab" aria-controls="feedback3" aria-selected="false">Feedback 3</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback4-tab" data-toggle="tab" href="#feedback4" role="tab" aria-controls="feedback4" aria-selected="false">Feedback 4</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback5-tab" data-toggle="tab" href="#feedback5" role="tab" aria-controls="feedback5" aria-selected="false">Feedback 5</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback6-tab" data-toggle="tab" href="#feedback6" role="tab" aria-controls="feedback6" aria-selected="false">Feedback 6</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback7-tab" data-toggle="tab" href="#feedback7" role="tab" aria-controls="feedback7" aria-selected="false">Feedback 7</a>
            </li>
        </ul>

        
        <div class="tab-content" id="feedbackTabsContent">
            <!-- Feedback 1 -->
            <div class="tab-pane fade show active" id="feedback1" role="tabpanel" aria-labelledby="feedback1-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The `viper` function recursively decreases the value of `b` by 5 until `b` is less than 0, printing each step. The `mountain` function recursively increases the value of `b` by 5 until `b` equals `n`, printing each step. This approach is flawed as it doesn't properly mirror the value of `n` after reaching below 0, nor does it correctly accomplish an up-and-down pattern due to its structure to manage recursion and return exclusively.
**Logical Errors in Given Program**:
- The function `viper` only handles the decrease and not the increase, exiting as soon as the number goes negative.
- The connection and flow between `viper` and `mountain` are not adequate to create the descending-ascending pattern as `mountain` doesn't properly retrace the steps in increasing order due to an improper initiation of its starting value from `viper`.
- Overall, the given solution fails to replicate the decrease till negative and subsequent increase back to `n` using a single recursive approach, instead separating these concerns into two individually flawed functions, devoid of proper linkage and misaligned starting parameters.         
                    </pre>
                    
                    <label for="feedback71_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="71">
                            <span class="star {% if feedback_data.feedback71 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback71 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback71 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback71 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback71 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback71_rating" id="feedback71_rating" value="{{ feedback_data.feedback71 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback2-tab">Save & Next</button>
                </div>
            </div>
            
            <!-- Feedback 2 -->
            <div class="tab-pane fade" id="feedback2" role="tabpanel" aria-labelledby="feedback2-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution attempts to employ two recursive functions (`viper()` and `mountain()`) to generate the same pattern. However, this division into two functions introduces unnecessary complexity and confusion:
- The `viper()` function decrements `b` by 5 while initially printing the value, until `b` becomes negative. It does not handle the recursion symmetry or pattern correctly.
- The `mountain()` function is designed to increment `b` by 5 and print the value until it equals `n` again. This function presumes that `b` starts at a negative value and incorrectly attempts to recreate the ascent by moving back to `n`.
The given approach fails to create the desired pattern since the printed ascending values do not correctly capture the values needed on the ascent (they start from an incorrect base determined by the behavior of `viper()`), nor do they function coherently as a recursive mirrored sequence. Additionally, the incorrect solution ends up printing a series of numbers that doesn't reflect the specified pattern when the descent reaches negative values due to lack of a proper base case to halt and invert the recursion properly.
**Summary**: 
The given solution, with its two separate recursive functions, inaccuracies in handling the values correctly, and lack of mirrored recursion logic, does not satisfy the problem requirements and introduces unnecessary complexity and potential errors. Moreover, the given solution's formatting and structure could be enhanced for better readability and adherence to good programming practices.
                    </pre>
                    
                    <label for="feedback72_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="72">
                            <span class="star {% if feedback_data.feedback72 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback72 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback72 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback72 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback72 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback72_rating" id="feedback72_rating" value="{{ feedback_data.feedback72 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback3-tab">Save & Next</button>
                </div>
            </div>
            
            <!-- Feedback 3 -->
            <div class="tab-pane fade" id="feedback3" role="tabpanel" aria-labelledby="feedback3-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution attempts to solve the problem by dividing the task between two recursive functions (`viper` for decrementing and `mountain` for incrementing), which is unnecessarily complex. The termination condition for the `viper` function is when the value becomes negative. However, the subsequent function `mountain` attempts to catch up from where `viper` left off, leading to repetition errors (e.g., starting to increment when not reaching the lowest number yet, which could miss the n-5 pattern). Due to misaligned conditions in `mountain`, there is a risk of repeating the numbers on the edge points (like n), not matching the required symmetric pattern, as observed for input '20'. The functions lack clear commenting, and variable names do not clearly convey their purpose (`b` is especially obscure). Indentations and spacing are poorly handled, thus lowering readability.
**Summary of Given Solution's Logical Errors:**
The given solution fails mainly due to its overcomplicated function division and faulty logic in ensuring symmetric outputs centered around the lowest number reached or zero. It mismanages the recursive connection and base case handling between the two functions, leading to potential duplication or omissions in output, especially noticeable in more extensive tests like with input '20'. The repeated number at the edges in some cases also demonstrates its non-compliance with the problem's requirements for a strictly mirrored output. 
Thus, the given solution inadequately maintains the desired pattern outputs and fails in both efficiency and correctness in handling the recursion process.
                    </pre>
                    
                    <label for="feedback73_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="73">
                            <span class="star {% if feedback_data.feedback73 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback73 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback73 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback73 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback73 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback73_rating" id="feedback73_rating" value="{{ feedback_data.feedback73 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback4-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 4 -->
            <div class="tab-pane fade" id="feedback4" role="tabpanel" aria-labelledby="feedback4-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution defines two recursive functions (`viper` and `mountain`) that attempt to print the desired sequence. In the `viper` function, it reduces the input value `b` by 5 recursively until `b` is less than 0, where it stops descending and does not continue any further actions for ascending the sequence. However, `viper` does not print the numbers in a mirror-like pattern after reaching the base case. The `mountain` function starts where `viper` leaves off, aiming to ascend back by increments of 5. It only starts incrementing after the base value from `viper` is set, which coincidentally restricts the output since `mountain` begins with the lowest value provided by `viper`. Together, these functions incorrectly handle the base case and sequence reversal. The main logical errors include not properly mirroring the sequence on ascent and the unnecessary complexity by splitting the single recursive pattern into two functions. Furthermore, the code does initiate with the value left by `viper`, making the ascent incorrect when linking with `mountain`.
**Summary:**
The given solution fails due to improper base cases handling, unnecessary complexity with two recursive calls, and incorrect resumption and continuation to mirror the sequence. The usage of two separate functions leads to disjointed logic that does not faithfully adhere to the specified mirrored output. The output flaw in the given program for the input `20` should produce '20 15 10 5 0 5 10 15 20', but due to its disjoint implementation, it might miss the re-ascension in some cases or handle values inconsistently.
                    </pre>
                    
                    <label for="feedback74_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="74">
                            <span class="star {% if feedback_data.feedback74 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback74 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback74 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback74 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback74 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback74_rating" id="feedback74_rating" value="{{ feedback_data.feedback74 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback5-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 5 -->
            <div class="tab-pane fade" id="feedback5" role="tabpanel" aria-labelledby="feedback5-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution involves two recursive functions (`viper` and `mountain`) which are not straightforward in achieving the problem's requirements. `viper` function decreases the number from `n` and prints every value until it becomes negative or zero. `mountain` function is intended to backtrack, increasing the number by 5 and printing until it equals the original number `n`. However, it incorrectly resumes counting beyond the point it should stop, resulting in an additional iteration at the end (e.g., for an input of 20, it erroneously prints '20' twice). The use of two functions to achieve what could be handled more succinctly and correctly by a single function adds unnecessary complexity and potential for errors. In 'viper', a recursive call is used only for decrementing, with no corresponding action for incrementing, which is managed by a separate function (`mountain`). This separation doesn't properly mirror the structure required to replicate the pattern demonstrated in the model.
Summary:
The given solution fails mainly because it incorrectly utilizes two separate recursive functions, leading to redundancy and potential errors, rather than a coherent single recursive method. It introduces an extra element in the printout due to improper base case handling and command sequence.
                    </pre>
                    
                    <label for="feedback75_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="75">
                            <span class="star {% if feedback_data.feedback75 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback75 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback75 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback75 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback75 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback75_rating" id="feedback75_rating" value="{{ feedback_data.feedback75 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback6-tab">Save & Next</button>
                </div>
            </div>
            <!-- Feedback 6 -->
            <div class="tab-pane fade" id="feedback6" role="tabpanel" aria-labelledby="feedback6-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
{{ ta1_feedback7 }}
                    </pre>
                    
                    <label for="feedback76_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="76">
                            <span class="star {% if feedback_data.feedback76 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback76 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback76 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback76 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback76 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback76_rating" id="feedback76_rating" value="{{ feedback_data.feedback76 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback7-tab">Save & Next</button>
                </div>
            </div>
 
            <!-- Feedback 7 -->
            <div class="tab-pane fade" id="feedback7" role="tabpanel" aria-labelledby="feedback7-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
{{ ta2_feedback7 }}
</pre>
                    
                    <label for="feedback77_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="77">
                            <span class="star {% if feedback_data.feedback77 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback77 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback77 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback77 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback77 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback77_rating" id="feedback77_rating" value="{{ feedback_data.feedback77 }}">
                    <button type="submit" class="btn btn-primary show-modal">Submit</button>
                </div>
            </div>
        </div>
    </div>
</form> 

<div class="modal fade" id="nextModal" tabindex="-1" role="dialog" aria-labelledby="nextModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="nextModalLabel">Confirm Next Tab</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                You cannot edit your response after submission. Do you want to submit?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                <button type="button" class="btn btn-primary" id="confirmNextBtn">Yes</button>
            </div>
        </div>
    </div>
</div>

<nav aria-label="Page navigation example" class="mt-4">
    <ul class="pagination justify-content-center">
        <li class="page-item {% if 1 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem1' 1 %}">1</a>
        </li>
        <li class="page-item {% if 2 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem2' 2 %}">2</a>
        </li>
        <li class="page-item {% if 3 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem3' 3 %}">3</a>
        </li>
        <li class="page-item {% if 4 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem4' 4 %}">4</a>
        </li>
        <li class="page-item {% if 5 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem5' 5 %}">5</a>
        </li>
        <li class="page-item {% if 6 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem6' 6 %}">6</a>
        </li>
        <li class="page-item {% if 7 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem7' 7 %}">7</a>
        </li>
    </ul>
</nav>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.nav-item .nav-link');
    
        // Enable or disable tabs based on stored state
        const isFirstVisit7 = localStorage.getItem('firstVisit7') === null;
    
        if (isFirstVisit7) {
            // Disable all tabs except the first one on the first visit
            tabs.forEach((tab, index) => {
                if (index !== 0) {
                    tab.classList.add('disabled');
                }
            });
        } else {
            // Enable previously unlocked tabs from localStorage
            tabs.forEach((tab, index) => {
                const tabId = tab.getAttribute('href').substring(1); // Get tab pane ID
                const isTabUnlocked = localStorage.getItem(`tabUnlocked_${tabId}`) === 'true';
    
                if (isTabUnlocked || index === 0) {
                    tab.classList.remove('disabled');
                }
            });
        }
    
        function checkAllFeedbackRatings() {
            const unfilledFeedback = [];
            document.querySelectorAll('.tab-pane').forEach(tab => {
                const hiddenInputs = tab.querySelectorAll('input[type="hidden"]');
                hiddenInputs.forEach(hiddenInput => {
                    const feedbackId = hiddenInput.getAttribute('name').match(/\d+/)[0];
                    const selectedRating = hiddenInput.value;
                    if (!selectedRating || selectedRating === '0') {
                        unfilledFeedback.push(`Feedback ${feedbackId.charAt(feedbackId.length - 1)}`);
                    }
                });
            });
            return unfilledFeedback;
        }
    
        document.querySelector('.show-modal').addEventListener('click', (e) => {
            const unfilledFeedback = checkAllFeedbackRatings();
            if (unfilledFeedback.length > 0) {
                alert(`Please rate these feedbacks to move on to the next problem: ${unfilledFeedback.join(', ')}`);
                e.preventDefault();
            } else {
                localStorage.setItem('firstVisit7', 'true');
                $('#nextModal').modal('show');
                e.preventDefault();
            }
        });
    
        document.getElementById('confirmNextBtn').addEventListener('click', () => {
            const form = document.querySelector('form');
            form.submit();
            localStorage.clear();
            $('#nextModal').modal('hide');
        });
    
        document.querySelectorAll('.next-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
        
                const currentTabPane = button.closest('.tab-pane');
                const feedbackItems = currentTabPane.querySelectorAll('.star-rating');
                const unfilledFeedback = [];
        
                feedbackItems.forEach(feedback => {
                    const feedbackId = feedback.getAttribute('data-feedback-id');
                    const savedRating = localStorage.getItem(`feedback${feedbackId}_rating`);
        
                    if (!savedRating || savedRating === '0') {
                        unfilledFeedback.push(`Feedback ${feedbackId}`);
                    }
                });
        
                if (unfilledFeedback.length > 0) {
                    alert(`Please rate the given feedback before moving to the next tab`);
                    return;
                }
        
                const nextTabId = button.getAttribute('data-next-tab');
                const nextTab = document.getElementById(nextTabId);
        
                if (nextTab) {
                    nextTab.classList.remove('disabled');
                    localStorage.setItem(`tabUnlocked_${nextTabId}`, 'true');
        
                    const currentTab = currentTabPane.id;
                    const currentNavLink = document.querySelector(`[href="#${currentTab}"]`);
                    currentNavLink.classList.remove('disabled');
        
                    nextTab.click();
                }
            });
        });
    
        document.querySelectorAll('.star-rating').forEach(starRatingDiv => {
            const feedbackId = starRatingDiv.getAttribute('data-feedback-id');
            const hiddenInput = document.querySelector(`input[name='feedback${feedbackId}_rating']`);
            if (!hiddenInput) {
                console.error(`Hidden input for feedback ${feedbackId} not found`);
                return;
            }
            const savedRating = localStorage.getItem(`feedback${feedbackId}_rating`);
            if (savedRating) {
                hiddenInput.value = savedRating;
                const stars = Array.from(starRatingDiv.querySelectorAll('.star'));
                for (let i = 0; i < savedRating; i++) {
                    stars[i].classList.add('filled');
                }
            }
            starRatingDiv.querySelectorAll('.star').forEach(star => {
                star.addEventListener('click', () => {
                    const value = star.getAttribute('data-value');
                    const stars = Array.from(star.parentElement.children);
                    stars.forEach(s => s.classList.remove('filled'));
                    for (let i = 0; i < value; i++) {
                        stars[i].classList.add('filled');
                    }
                    hiddenInput.value = value;
                    localStorage.setItem(`feedback${feedbackId}_rating`, value);
                });
            });
        });
    
        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                if (tab.classList.contains('disabled')) {
                    e.preventDefault();
                }
            });
        });
    
        tabs[0].classList.remove('disabled');
        window.history.pushState(null, document.title, window.location.href);
        window.addEventListener('popstate', function(event) {
            alert("This action is not allowed. Please use the navigation buttons provided.");
            window.history.pushState(null, document.title, window.location.href);
        });
    });
    
</script>


    

<style>
    .feedback-rating-container {
        display: flex;
        align-items: baseline; 
        justify-content: center; 
        margin-top: 1rem; 
    }
    
    .star-rating .star {
        font-size: 30px; 
        color: #ddd; 
        cursor: pointer;
        transition: color 0.2s;
    }
    
    .mt-3, .my-3 {
        margin-top: 1rem !important;
        text-align: center;
    }
    
    .star-rating .star.filled {
        color: #ffc107; 
    }
    
    .not-helpful {
        color: red;
        position: relative;
        right: 0.6rem;
        bottom: 0.2rem;
        font-weight: 600;
    }
    
    .helpful {
        color: green;
        position: relative;
        left: 0.6rem;
        bottom: 0.2rem;
        font-weight: 600;
    }

    label {
        font-weight: 600;
    }
</style>
{% endblock %}
