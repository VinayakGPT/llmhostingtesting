{% extends "base2.html" %}
{% block title %}Problem 2{% endblock %}

{% block content %}
<form id="taproblem2-form" method="post" novalidate>
    {% csrf_token %}
    <div class="container">
        <br>  
        <h2>2. Triangle Type</h2>
        <div class="problem-statement"> 
            <pre class="wrap"><h5><b>Problem Statement: </b></h5>You would be given three integers as input which corresponds to the three sides of a triangle. Write a program determine if the triangle is acute, right or obtuse. You should print "Invalid Triangle" if the side combinations not correspond to a valid triangle.
Example:
Input:
3 5 4
Output:
Right Triangle</pre>
        </div>

        <p><pre class="wraptext"><h5><b>Incorrect Solution:</b></h5><code><span class="keyword">#include</span><span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> a, b, c, temp;
    scanf(<span class="string">"%d %d %d"</span>, &a, &b, &c);

    <span class="keyword">while</span>(!((a &lt;= b) &amp;&amp; (b &lt;= c))) {
        <span class="keyword">if</span>(b &lt; a) {
            temp = a;
            a = b;
            b = temp;
        }
        <span class="keyword">if</span>(c &lt; b) {
            temp = b;
            b = c;
            c = temp;
        } 
    }
    <span class="keyword">if</span>((a + b) &lt; c) {
        printf(<span class="string">"Invalid Triangle"</span>);
    } <span class="keyword">else</span> {
        <span class="keyword">if</span>((a * a + b * b) &gt; (c * c)) {
            printf(<span class="string">"Acute Triangle"</span>);
        } <span class="keyword">else</span> <span class="keyword">if</span>((a * a + b * b) == (c * c)) {
            printf(<span class="string">"Right Triangle"</span>);
        } <span class="keyword">else</span> {
            printf(<span class="string">"Obtuse Triangle"</span>);
        }
    }
    <span class="keyword">return</span> 0;
}</code></pre></p>



        <ul class="nav nav-tabs" id="feedbackTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="feedback1-tab" data-toggle="tab" href="#feedback1" role="tab" aria-controls="feedback1" aria-selected="true">Feedback 1</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback2-tab" data-toggle="tab" href="#feedback2" role="tab" aria-controls="feedback2" aria-selected="false">Feedback 2</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback3-tab" data-toggle="tab" href="#feedback3" role="tab" aria-controls="feedback3" aria-selected="false">Feedback 3</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback4-tab" data-toggle="tab" href="#feedback4" role="tab" aria-controls="feedback4" aria-selected="false">Feedback 4</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback5-tab" data-toggle="tab" href="#feedback5" role="tab" aria-controls="feedback5" aria-selected="false">Feedback 5</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback6-tab" data-toggle="tab" href="#feedback6" role="tab" aria-controls="feedback6" aria-selected="false">Feedback 6</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback7-tab" data-toggle="tab" href="#feedback7" role="tab" aria-controls="feedback7" aria-selected="false">Feedback 7</a>
            </li>
        </ul>

        
        <div class="tab-content" id="feedbackTabsContent">
            <!-- Feedback 1 -->
            <div class="tab-pane fade show active" id="feedback1" role="tabpanel" aria-labelledby="feedback1-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution attempts to sort the sides by repeatedly swapping them until a <= b and b <= c, which might not be efficient or correct for all inputs. Moreover, it incorrectly checks if the triangle is valid by ensuring `(a + b) < c`, which should be `(a + b) <= c`.
                    </pre>
            
                    <label for="feedback21_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
            
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="21">
                            <span class="star {% if feedback_data.feedback21 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback21 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback21 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback21 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback21 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
            
                    <input type="hidden" name="feedback21_rating" id="feedback21_rating" value="{{ feedback_data.feedback21 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback2-tab">Save & Next</button>
                </div>
            </div>
            

            <!-- Feedback 2 -->
            <div class="tab-pane fade" id="feedback2" role="tabpanel" aria-labelledby="feedback2-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given program attempts to ensure the sides of the triangle are sorted in increasing order (a ≤ b ≤ c) using a while loop and conditional statements, and then checks the triangle type. However, the main issue with the given solution lies in its loop, which runs indefinitely if the side lengths are input in such a way that they don't converge to a ≤ b ≤ c through simple adjacent swaps. This could happen when the inputs form sequences like a cycle that doesn't resolve by sequential pair swaps. Additionally, the condition for an invalid triangle is incorrect as it only tests if the sum of the two smaller sides is less than the longest side (it should check if it's less than or equal to).
The given solution is structurally overcomplicated and has a flaw in its logic due to the use of a potentially infinite loop and incorrect checks for triangle validity. It also fails to follow good programming practices in terms of readability and proper indentation.
                    </pre>
                    
                    <label for="feedback22_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="22">
                            <span class="star {% if feedback_data.feedback22 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback22 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback22 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback22 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback22 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback22_rating" id="feedback22_rating" value="{{ feedback_data.feedback22 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback3-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 3 -->
            <div class="tab-pane fade" id="feedback3" role="tabpanel" aria-labelledby="feedback3-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution implements a sorting loop to arrange the values in ascending order (`a <= b <=c`) and then checks if these sides can form a specific triangle. However, it contains logical flaws:
1. **Sorting Loop Error**: It keeps swapping the values until they are sorted, but its condition check within the while-loop does not ensure that the array is sorted in a single pass for all cases as it might require additional iterations. For instance, the program may enter an infinite loop when the input is `1 3 2` because after swapping `b` and `c`, the condition for the loop is no longer false, but it won't check `a` and `b` again without another trigger.
2. **Triangle Validity Check**: The condition `(a + b) < c` alone to check the triangle's validity is insufficient. It should consider all permutations of the sides, i.e., the invalid triangle condition must also include `(b + c) <= a` and `(a + c) <= b`.
The given solution will fail in cases where `a + b == c`, `b + c == a`, or `c + a == b`, as it incorrectly classifies these as valid triangles, whereas they should be labeled as "Invalid Triangle". Additionally, the given solution could lead to infinite loops or errors in sorting in certain conditions due to its setup.
                    </pre>
                    
                    <label for="feedback23_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="23">
                            <span class="star {% if feedback_data.feedback23 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback23 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback23 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback23 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback23 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback23_rating" id="feedback23_rating" value="{{ feedback_data.feedback23 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback4-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 4 -->
            <div class="tab-pane fade" id="feedback4" role="tabpanel" aria-labelledby="feedback4-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
**Logical Errors in the given Solution:**
1. **Loop-Based Sorting:** The given solution uses a loop with conditional swaps to sort the triangle sides, but this has potential logical flaws because it assumes a specific sorted order without ensuring it properly. It might take multiple iterations to correctly sort the sides due to its design.
2. **Invalid Triangle Check:** The condition for checking if the given sides can form a valid triangle is miscalculated. The given solution only checks `if((a + b) < c)` which can lead to wrong conclusions about the triangle's validity.
**Demonstrated Issue:**
For the input `1 2 3`, the given solution fails to recognize it as an invalid triangle.
**Summary:**
The given solution attempts to sort the sides with a loop that might not handle all scenarios correctly and improperly checks the triangle's validity, missing some invalid cases.                        
                    </pre>
                    
                    <label for="feedback24_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="24">
                            <span class="star {% if feedback_data.feedback24 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback24 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback24 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback24 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback24 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback24_rating" id="feedback24_rating" value="{{ feedback_data.feedback24 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback5-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 5 -->
            <div class="tab-pane fade" id="feedback5" role="tabpanel" aria-labelledby="feedback5-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution only checks if the sum of the two smaller sides is less than the largest side ((a+b)&ltc). This condition is necessary but not always sufficient as it does not account for cases where '(b+c)<=a' or '(a+c)<=b'. The solution correctly applies the Pythagorean theorem to determine if the triangle is acute, right, or obtuse. It uses the sorted values such that the largest side is compared with the sum of the squares of the other two sides. The given solution uses a while loop with conditional swaps to order the variables (`a`, `b`, `c`) such that `a <= b <= c`. While this attempts to organize the variables in sorted order, it can lead to unnecessary computations or might fail in specific scenarios without additional checks.
Summary:
The given solution might fail in properly verifying the validity of a triangle, particularly by not considering all permutations of the sides that could possibly invalidate a triangle. Secondly, the way it sorts the sides involves potentially more computational overhead and complexity. These logical errors would cause the given solution to falsely classify or fail to recognize an "Invalid Triangle" in some inputs like '1 2 3', where no triangle can be formed.
                    </pre>
                    
                    <label for="feedback25_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="25">
                            <span class="star {% if feedback_data.feedback25 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback25 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback25 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback25 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback25 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback25_rating" id="feedback25_rating" value="{{ feedback_data.feedback25 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback6-tab">Save & Next</button>
                </div>
            </div>
            <!-- Feedback 6 -->
            <div class="tab-pane fade" id="feedback6" role="tabpanel" aria-labelledby="feedback6-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
{{ ta1_feedback2 }}
</pre>
                    
                    <label for="feedback26_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="26">
                            <span class="star {% if feedback_data.feedback26 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback26 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback26 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback26 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback26 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback26_rating" id="feedback26_rating" value="{{ feedback_data.feedback26 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback7-tab">Save & Next</button>
                </div>
            </div>
 
            <!-- Feedback 7 -->
            <div class="tab-pane fade" id="feedback7" role="tabpanel" aria-labelledby="feedback7-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
{{ ta2_feedback2 }}
                    </pre>
                    
                    <label for="feedback27_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="27">
                            <span class="star {% if feedback_data.feedback27 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback27 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback27 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback27 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback27 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback27_rating" id="feedback27_rating" value="{{ feedback_data.feedback27 }}">
                    <button type="submit" class="btn btn-primary">Next Problem</button>
                </div>
            </div>
        </div>
    </div> 
</form>

<nav aria-label="Page navigation example" class="mt-4">
    <ul class="pagination justify-content-center">
        <li class="page-item {% if 1 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem1' 1 %}">1</a>
        </li>
        <li class="page-item {% if 2 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem2' 2 %}">2</a>
        </li>
        <li class="page-item {% if 3 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem3' 3 %}">3</a>
        </li>
        <li class="page-item {% if 4 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem4' 4 %}">4</a>
        </li>
        <li class="page-item {% if 5 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem5' 5 %}">5</a>
        </li>
        <li class="page-item {% if 6 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem6' 6 %}">6</a>
        </li>
        <li class="page-item {% if 7 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem7' 7 %}">7</a>
        </li>
    </ul>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.nav-item .nav-link');
        
        const isFirstVisit2 = localStorage.getItem('firstVisit2') === null;

        if (isFirstVisit2) {
            tabs.forEach((tab, index) => {
                if (index !== 0) {
                    tab.classList.add('disabled');
                }
            });
        } 
        else {
            tabs.forEach((tab, index) => {
                const tabId = tab.getAttribute('href').substring(1); 
                const isTabUnlocked = localStorage.getItem(`tabUnlocked_${tabId}`) === 'true';

                if (isTabUnlocked || index === 0) {
                    tab.classList.remove('disabled');
                }
            });
        }

        function checkAllFeedbackRatings() {
            const unfilledFeedback = [];

            document.querySelectorAll('.tab-pane').forEach(tab => {
                const hiddenInputs = tab.querySelectorAll('input[type="hidden"]');

                hiddenInputs.forEach(hiddenInput => {
                    const feedbackId = hiddenInput.getAttribute('name').match(/\d+/)[0];
                    const selectedRating = hiddenInput.value;

                    if (!selectedRating || selectedRating === '0') {
                        unfilledFeedback.push(`Feedback ${feedbackId.charAt(feedbackId.length - 1)}`);
                    }
                });
            });

            return unfilledFeedback;
        }

        document.querySelector('.btn-primary[type="submit"]').addEventListener('click', (e) => {
            const unfilledFeedback = checkAllFeedbackRatings();

            if (unfilledFeedback.length > 0) {
                alert(`Please rate these feedbacks to move on to the next problem: ${unfilledFeedback.join(', ')}`);
                e.preventDefault();
            } else {
                localStorage.setItem('firstVisit2', 'true');
            }
        });

        document.querySelectorAll('.next-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
        
                const currentTabPane = button.closest('.tab-pane');
                const feedbackItems = currentTabPane.querySelectorAll('.star-rating');
                const unfilledFeedback = [];
        
                feedbackItems.forEach(feedback => {
                    const feedbackId = feedback.getAttribute('data-feedback-id');
                    const savedRating = localStorage.getItem(`feedback${feedbackId}_rating`);
        
                    if (!savedRating || savedRating === '0') {
                        unfilledFeedback.push(`Feedback ${feedbackId}`);
                    }
                });
        
                if (unfilledFeedback.length > 0) {
                    alert(`Please rate the given feedback before moving to the next tab`);
                    return;
                }
        
                const nextTabId = button.getAttribute('data-next-tab');
                const nextTab = document.getElementById(nextTabId);
        
                if (nextTab) {
                    nextTab.classList.remove('disabled');
                    localStorage.setItem(`tabUnlocked_${nextTabId}`, 'true');
        
                    const currentTab = currentTabPane.id;
                    const currentNavLink = document.querySelector(`[href="#${currentTab}"]`);
                    currentNavLink.classList.remove('disabled');
        
                    nextTab.click();
                }
            });
        });

        document.querySelectorAll('.star-rating').forEach(starRatingDiv => {
            const feedbackId = starRatingDiv.getAttribute('data-feedback-id');
            const hiddenInput = document.querySelector(`input[name='feedback${feedbackId}_rating']`);

            if (!hiddenInput) {
                console.error(`Hidden input for feedback ${feedbackId} not found`);
                return;
            }

            const savedRating = localStorage.getItem(`feedback${feedbackId}_rating`);
            if (savedRating) {
                hiddenInput.value = savedRating;

                const stars = Array.from(starRatingDiv.querySelectorAll('.star'));
                for (let i = 0; i < savedRating; i++) {
                    stars[i].classList.add('filled');
                }
            }

            starRatingDiv.querySelectorAll('.star').forEach(star => {
                star.addEventListener('click', () => {
                    const value = star.getAttribute('data-value');
                    const stars = Array.from(star.parentElement.children);

                    stars.forEach(s => s.classList.remove('filled'));

                    for (let i = 0; i < value; i++) {
                        stars[i].classList.add('filled');
                    }

                    hiddenInput.value = value;

                    localStorage.setItem(`feedback${feedbackId}_rating`, value);
                });
            });
        });

        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                if (tab.classList.contains('disabled')) {
                    e.preventDefault();
                }
            });
        });

        tabs[0].classList.remove('disabled');
    });
</script>

 
<style>
    .feedback-rating-container {
        display: flex;
        align-items: baseline; 
        justify-content: center; 
        margin-top: 1rem; 
    }
    
    .star-rating .star {
        font-size: 30px; 
        color: #ddd; 
        cursor: pointer;
        transition: color 0.2s;
    }
    
    .mt-3, .my-3 {
        margin-top: 1rem !important;
        text-align: center;
    }
    
    .star-rating .star.filled {
        color: #ffc107; 
    }
    
    .not-helpful {
        color: red;
        position: relative;
        right: 0.6rem;
        bottom: 0.2rem;
        font-weight: 600;
    }
    
    .helpful {
        color: green;
        position: relative;
        left: 0.6rem;
        bottom: 0.2rem;
        font-weight: 600;
    }

    label {
        font-weight: 600;
    }
</style>
{% endblock %}
