{% extends "base2.html" %}
{% block title %}Problem 6{% endblock %}
 
{% block content %}
<form id="taproblem6-form" method="post" novalidate>
    {% csrf_token %}
    <div class="container">
        <br>
        <h2> 6. Find Duplicates</h2> 
        <div class="problem-statement">
            <pre class="wrap"><h5><b>Problem Statement:</b></h5>Given an integer array, detect if it contains duplicate elements.
Input Specification: 
First line contains size N of the array.
Next line contains N space separated integers giving the contents of the array.
Output Format:
Output YES or NO (followed by a newline).
Variable Constraints:
The array size is smaller than 50.
Each array entry is an integer which fits an int data type.
Example:
Input:
4
34 13 42 13
Output:
YES
Input:
4
11 2 18 22
Output:
NO</pre>
        </div>

        <p><pre class="wraptext"><h5><b>Incorrect Solution:</b></h5><code><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>
<span class="keyword">void</span> <span class="function">duplicate</span>(<span class="keyword">int</span> b[],<span class="keyword">int</span> m)
{ 
    <span class="keyword">int</span> k=0,x=0;
    <span class="keyword">for</span>(<span class="keyword">int</span> k=0;k&lt;m;k++)
        <span class="keyword">for</span>(<span class="keyword">int</span> j=1;j&lt;m;j++)
            <span class="keyword">if</span>(b[k]==b[j] &amp;&amp; k!=j)
                x++;
    <span class="keyword">if</span>(x&gt;=2)
        <span class="function">printf</span>(<span class="string">"YES"</span>);
    <span class="keyword">else</span>
        <span class="function">printf</span>(<span class="string">"NO"</span>);
} 
<span class="keyword">int</span> <span class="function">main</span>()
{
    <span class="keyword">int</span> y;
    <span class="function">scanf</span>(<span class="string">"%d"</span>,&amp;y);
    <span class="keyword">int</span> a[y];
    <span class="keyword">for</span>(<span class="keyword">int</span> i=0;i&lt;y;i++)
        <span class="function">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);
    <span class="function">duplicate</span>(a,y);
    <span class="keyword">return</span> 0;
}</code></pre></p>


        <ul class="nav nav-tabs" id="feedbackTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="feedback1-tab" data-toggle="tab" href="#feedback1" role="tab" aria-controls="feedback1" aria-selected="true">Feedback 1</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback2-tab" data-toggle="tab" href="#feedback2" role="tab" aria-controls="feedback2" aria-selected="false">Feedback 2</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback3-tab" data-toggle="tab" href="#feedback3" role="tab" aria-controls="feedback3" aria-selected="false">Feedback 3</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback4-tab" data-toggle="tab" href="#feedback4" role="tab" aria-controls="feedback4" aria-selected="false">Feedback 4</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback5-tab" data-toggle="tab" href="#feedback5" role="tab" aria-controls="feedback5" aria-selected="false">Feedback 5</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback6-tab" data-toggle="tab" href="#feedback6" role="tab" aria-controls="feedback6" aria-selected="false">Feedback 6</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="feedback7-tab" data-toggle="tab" href="#feedback7" role="tab" aria-controls="feedback7" aria-selected="false">Feedback 7</a>
            </li>
        </ul>

        
        <div class="tab-content" id="feedbackTabsContent">
            <!-- Feedback 1 -->
            <div class="tab-pane fade show active" id="feedback1" role="tabpanel" aria-labelledby="feedback1-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution has two primary errors in logic:
1. **Nested Loop Bounds**: The inner loop starts at `j=1` instead of `j=k+1`. This causes the program to incorrectly compare elements and potentially miss duplicates, as well as improperly count the same duplicate multiple times if it appears.
2. **Duplication Counting and Conditional Check**: The variable `x` increments whenever a duplicate is found but doesn't reset for each array element. It only checks if `x` is greater than or equal to 2 after all comparisons are done, which is incorrect because the presence of any duplicate (not the count of duplicate pairs) should be sufficient to determine the output.          
                    </pre>
                    
                    <label for="feedback61_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="61">
                            <span class="star {% if feedback_data.feedback61 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback61 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback61 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback61 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback61 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback61_rating" id="feedback61_rating" value="{{ feedback_data.feedback61 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback2-tab">Save & Next</button>
                </div>
            </div>
            
            <!-- Feedback 2 -->
            <div class="tab-pane fade" id="feedback2" role="tabpanel" aria-labelledby="feedback2-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given program has several logical problems that diverge from the approach of a successful duplicate detection algorithm:
1. **Nested Loop Range**: The inner loop in the given code should ideally start from `k+1` rather than `1` to prevent redundant comparisons and ensure accurate duplicate checks between unique pairs of indices.
2. **Duplicate Counting Mechanism**: In the given code, variable `x` counts the number of times elements are duplicated for every comparison. It neither resets between different runs of the outer loop nor provides a threshold where a single duplicate would suffice to report "YES".
3. **Program Results Evaluation**: The if-condition to print "YES" or "NO" based on `x >= 2` in the given program is outside the loops, but it seems to be wrongly placed or improperly scoped due to lack of braces for nested conditional blocks.
4. **Location of Output Condition**: It checks the value of `x` after all comparisons are done. This approach is inefficient and can be inaccurate as it doesn't immediately stop further comparisons once a single duplicate truly needs only one instance found to decide.
In summary, the given program has flaws due to poor loop boundaries, inefficient duplicate counting, and incorrect placement/evaluation of output conditions. These will almost certainly return incorrect outputs on most valid inputs where duplicates are involved at any position other than the first two elements.          
                    </pre>
                    
                    <label for="feedback62_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="62">
                            <span class="star {% if feedback_data.feedback62 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback62 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback62 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback62 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback62 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback62_rating" id="feedback62_rating" value="{{ feedback_data.feedback62 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback3-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 3 -->
            <div class="tab-pane fade" id="feedback3" role="tabpanel" aria-labelledby="feedback3-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution provided has a couple of core issues that lead to a different output compared to the expected behavior as per the problem description:
1. **Nested Loop Condition Issue**: The given solution sets its inner `for` loop to start at `j = 1` independently of `k`. This causes the issue where it not only compares elements inappropriately (e.g., when `k = 0` it still starts comparing from the second element of the array), but it also inherently leads to redundant and incorrect comparisons since every element pair is not considered. Ideally, the inner loop should start from `j = k+1` to avoid comparing an element with itself and to prevent comparison of the same pair multiple times.
2. **Counting Logic**: The `x` variable is used to count how often an element appears in the array after its first occurrence. However, the logic is flawed in that `x` is only checking if it reaches 2 or more, which isn't directly linked to finding duplicates in the desired manner. Instead, you really need to find just a single duplicate and then can immediately conclude the result (stop checking further).
3. **Output Command Placement**: The commands to print "YES" or "NO" is incorrectly placed outside of the loops, where the `if` condition that checks `x >= 2` also appears to be outside the loops, which means it will only check the result after all comparisons are finished, thus missing the correct opportunity to decide on the presence of a duplicate during the checking.
4., **Improper Printing**: The given solution does not ensure that results "YES" or "NO" are followed by a newline character, which is a specific output format requirement.                        
                    </pre>
                    
                    <label for="feedback63_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="63">
                            <span class="star {% if feedback_data.feedback63 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback63 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback63 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback63 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback63 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback63_rating" id="feedback63_rating" value="{{ feedback_data.feedback63 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback4-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 4 -->
            <div class="tab-pane fade" id="feedback4" role="tabpanel" aria-labelledby="feedback4-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The given solution inspects all elements through its nested looping without carefully avoiding comparing an element with itself in an unproductive manner. Namely, both loops start from the beginning, and a secondary condition `k!=j` is used to prevent comparing an element with itself. In the given solution, the code improperly assumes duplicates by using a counter `x` incremented throughout the nested looping, and then checks if `x>=2` after completing all iterations. This is flawed for two reasons: firstly, it misinterprets the counting (counting all 'duplicate hits' not just distinct pairs of indices) and secondly, it executes the check for printing outside the loops, not resetting the counter for each element leading to accumulated non-reset counts.
**Errors in Given Solution**:
- The given program's counting methodology results in miscounting duplicates, particularly, by increasing the duplicate counter `x` for every hit of similarity between elements, irrespective of their indices pairs. This may create inaccurate interpretations when multiple duplicates are present. 
- The position of output statements can further muddle the output, evidenced by not being within any conditional logic or loops restricting its execution.
- It also doesn't account for user input variances robustly, highlighted by assumptions on entering entire arrays properly.
**Summary of Logical Errors**:
- The given solution's use of nested loops with an inappropriate condition and counter mismanages the detection of duplicates, potentially leading to incorrect results when multiple duplicates are present.
- The manner and positioning of the print command for outputting the result is incorrect as it does not necessarily reflect the outcome based on the detected duplicates since it disregards the scope and sequence of checks.
Modifying these aspects should align the given program closer to a correct and effective solution for detecting duplicates in the provided array.
                    </pre>
                    
                    <label for="feedback64_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="64">
                            <span class="star {% if feedback_data.feedback64 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback64 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback64 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback64 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback64 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback64_rating" id="feedback64_rating" value="{{ feedback_data.feedback64 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback5-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 5 -->
            <div class="tab-pane fade" id="feedback5" role="tabpanel" aria-labelledby="feedback5-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
The inner loop starts from `j = 1` always, which is incorrect as it doesn't compare the first element with others correctly. Moreover, the index ranges are too broad which can lead to unnecessary comparisons of elements with themselves when j should ideally start from `k+1` to prevent the same index comparison. The count of duplicates (`x`) is checked only once outside both loops and requires `x` to be at least `2`. This means the approach incorrectly assesses the requirement; it should only require one duplicate (i.e., `x` should be `>=1`), and the check must happen immediately after finding any duplicate, not post all iterations. The indentation of the conditional statements that print "YES" or "NO" is incorrect, leading them to execute after finishing both loops completely regardless of whether duplicates were found early. They should only print once the duplicate status is confirmed.
**Logical Errors in Given Program:**
- The second loop's start should be dynamic to ensure comparisons without redundancy.
- Detection of duplicates should flag immediately rather than counting occurrences post full iteration.
- Output handling needs to be associated directly within the logical structures that check for duplicates, ensuring prompt response to findings.
**Summary:**
In summary, the given code mismanages the loop indices for comparison, interprets the condition for flagging duplicates inadequately, and improperly handles the output logic, leading to incorrect results particularly when the program needs to stop processing upon first discovery of a duplicate.
                    </pre>
                    
                    <label for="feedback65_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="65">
                            <span class="star {% if feedback_data.feedback65 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback65 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback65 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback65 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback65 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback65_rating" id="feedback65_rating" value="{{ feedback_data.feedback65 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback6-tab">Save & Next</button>
                </div>
            </div>

            <!-- Feedback 6 -->
            <div class="tab-pane fade" id="feedback6" role="tabpanel" aria-labelledby="feedback6-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
{{ ta1_feedback6 }}
</pre>
                    
                    <label for="feedback66_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="66">
                            <span class="star {% if feedback_data.feedback66 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback66 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback66 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback66 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback66 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback66_rating" id="feedback66_rating" value="{{ feedback_data.feedback66 }}">
                    <button class="btn btn-primary next-btn mt-3" data-next-tab="feedback7-tab">Save & Next</button>
                </div>
            </div>
        
            <!-- Feedback 7 -->
            <div class="tab-pane fade" id="feedback7" role="tabpanel" aria-labelledby="feedback7-tab">
                <div class="feedback-content">
                    <pre class="wrap">
                        
{{ ta2_feedback6 }}
</pre>
                    
                    <label for="feedback67_rating">How helpful is the feedback to understand the logical error(s) in the given program?</label>
                    <div class="feedback-rating-container">
                        <div class="feedback-label not-helpful">Not Helpful</div>
            
                        <div class="star-rating mt-3" data-feedback-id="67">
                            <span class="star {% if feedback_data.feedback67 >= 1 %}filled{% endif %}" data-value="1">&#9733;</span>
                            <span class="star {% if feedback_data.feedback67 >= 2 %}filled{% endif %}" data-value="2">&#9733;</span>
                            <span class="star {% if feedback_data.feedback67 >= 3 %}filled{% endif %}" data-value="3">&#9733;</span>
                            <span class="star {% if feedback_data.feedback67 >= 4 %}filled{% endif %}" data-value="4">&#9733;</span>
                            <span class="star {% if feedback_data.feedback67 >= 5 %}filled{% endif %}" data-value="5">&#9733;</span>
                        </div>
            
                        <div class="feedback-label helpful">Very Helpful</div>
                    </div>
                    <input type="hidden" name="feedback67_rating" id="feedback67_rating" value="{{ feedback_data.feedback67 }}">
                    <button type="submit" class="btn btn-primary">Next Problem</button>
                </div>
            </div>
        </div>
    </div>
</form>

<nav aria-label="Page navigation example" class="mt-4">
    <ul class="pagination justify-content-center">
        <li class="page-item {% if 1 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem1' 1 %}">1</a>
        </li>
        <li class="page-item {% if 2 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem2' 2 %}">2</a>
        </li>
        <li class="page-item {% if 3 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem3' 3 %}">3</a>
        </li>
        <li class="page-item {% if 4 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem4' 4 %}">4</a>
        </li>
        <li class="page-item {% if 5 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem5' 5 %}">5</a>
        </li>
        <li class="page-item {% if 6 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem6' 6 %}">6</a>
        </li>
        <li class="page-item {% if 7 not in visited_pages %}disabled{% endif %}">
            <a class="page-link" href="{% url 'taproblem7' 7 %}">7</a>
        </li>
    </ul>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.nav-item .nav-link');

        const isFirstVisit6 = localStorage.getItem('firstVisit6') === null;

        if (isFirstVisit6) {
            tabs.forEach((tab, index) => {
                if (index !== 0) {
                    tab.classList.add('disabled');
                }
            });
        } else {
            tabs.forEach((tab, index) => {
                const tabId = tab.getAttribute('href').substring(1); 
                const isTabUnlocked = localStorage.getItem(`tabUnlocked_${tabId}`) === 'true';

                if (isTabUnlocked || index === 0) {
                    tab.classList.remove('disabled');
                }
            });
        }

        function checkAllFeedbackRatings() {
            const unfilledFeedback = [];

            document.querySelectorAll('.tab-pane').forEach(tab => {
                const hiddenInputs = tab.querySelectorAll('input[type="hidden"]');

                hiddenInputs.forEach(hiddenInput => {
                    const feedbackId = hiddenInput.getAttribute('name').match(/\d+/)[0];
                    const selectedRating = hiddenInput.value;

                    if (!selectedRating || selectedRating === '0') {
                        unfilledFeedback.push(`Feedback ${feedbackId.charAt(feedbackId.length - 1)}`);
                    }
                });
            });

            return unfilledFeedback;
        }

        document.querySelector('.btn-primary[type="submit"]').addEventListener('click', (e) => {
            const unfilledFeedback = checkAllFeedbackRatings();

            if (unfilledFeedback.length > 0) {
                alert(`Please rate these feedbacks to move on to the next problem: ${unfilledFeedback.join(', ')}`);
                e.preventDefault();
            } else {
                localStorage.setItem('firstVisit6', 'true');
            }
        });

        document.querySelectorAll('.next-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
        
                const currentTabPane = button.closest('.tab-pane');
                const feedbackItems = currentTabPane.querySelectorAll('.star-rating');
                const unfilledFeedback = [];
        
                feedbackItems.forEach(feedback => {
                    const feedbackId = feedback.getAttribute('data-feedback-id');
                    const savedRating = localStorage.getItem(`feedback${feedbackId}_rating`);
        
                    if (!savedRating || savedRating === '0') {
                        unfilledFeedback.push(`Feedback ${feedbackId}`);
                    }
                });
        
                if (unfilledFeedback.length > 0) {
                    alert(`Please rate the given feedback before moving to the next tab`);
                    return;
                }
        
                const nextTabId = button.getAttribute('data-next-tab');
                const nextTab = document.getElementById(nextTabId);
        
                if (nextTab) {
                    nextTab.classList.remove('disabled');
                    localStorage.setItem(`tabUnlocked_${nextTabId}`, 'true');
        
                    const currentTab = currentTabPane.id;
                    const currentNavLink = document.querySelector(`[href="#${currentTab}"]`);
                    currentNavLink.classList.remove('disabled');
        
                    nextTab.click();
                }
            });
        });

        document.querySelectorAll('.star-rating').forEach(starRatingDiv => {
            const feedbackId = starRatingDiv.getAttribute('data-feedback-id');
            const hiddenInput = document.querySelector(`input[name='feedback${feedbackId}_rating']`);

            if (!hiddenInput) {
                console.error(`Hidden input for feedback ${feedbackId} not found`);
                return;
            }

            const savedRating = localStorage.getItem(`feedback${feedbackId}_rating`);
            if (savedRating) {
                hiddenInput.value = savedRating;

                const stars = Array.from(starRatingDiv.querySelectorAll('.star'));
                for (let i = 0; i < savedRating; i++) {
                    stars[i].classList.add('filled');
                }
            }

            starRatingDiv.querySelectorAll('.star').forEach(star => {
                star.addEventListener('click', () => {
                    const value = star.getAttribute('data-value');
                    const stars = Array.from(star.parentElement.children);

                    stars.forEach(s => s.classList.remove('filled'));

                    for (let i = 0; i < value; i++) {
                        stars[i].classList.add('filled');
                    }

                    hiddenInput.value = value;

                    localStorage.setItem(`feedback${feedbackId}_rating`, value);
                });
            });
        });

        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                if (tab.classList.contains('disabled')) {
                    e.preventDefault();
                }
            });
        }); 

        tabs[0].classList.remove('disabled');
    });
</script>


<style>
    .feedback-rating-container {
        display: flex;
        align-items: baseline; 
        justify-content: center; 
        margin-top: 1rem; 
    }
    
    .star-rating .star {
        font-size: 30px; 
        color: #ddd; 
        cursor: pointer;
        transition: color 0.2s;
    }
    
    .mt-3, .my-3 {
        margin-top: 1rem !important;
        text-align: center;
    }
    
    .star-rating .star.filled {
        color: #ffc107; 
    }
    
    .not-helpful {
        color: red;
        position: relative;
        right: 0.6rem;
        bottom: 0.2rem;
        font-weight: 600;
    }
    
    .helpful {
        color: green;
        position: relative;
        left: 0.6rem;
        bottom: 0.2rem;
        font-weight: 600;
    }

    label {
        font-weight: 600;
    }
</style>
{% endblock %}
